<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 7.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha256-XOqroi11tY4EFQMR9ZYwZWKj5ZXiftSx36RRuC3anlA=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/themes/orange/pace-theme-bounce.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script>

<script class="next-config" data-name="main" type="application/json">{"hostname":"ihongren.github.io","root":"/","images":"/images","scheme":"Gemini","darkmode":"auto","version":"8.20.0","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"always","padding":18,"offset":12},"copycode":{"enable":true,"style":"mac"},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":true,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":true,"nav":null},"stickytabs":true,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="一个酷爱编程的安全工程师">
<meta property="og:type" content="website">
<meta property="og:title" content="gelen&#39;s blog">
<meta property="og:url" content="https://ihongren.github.io/page/4/index.html">
<meta property="og:site_name" content="gelen&#39;s blog">
<meta property="og:description" content="一个酷爱编程的安全工程师">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="gelen">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://ihongren.github.io/page/4/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"page/4/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>gelen's blog</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  
  <main class="main">


    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">gelen's blog</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
        
      </ul>


      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="gelen"
      src="/images/avatar2.gif">
  <p class="site-author-name" itemprop="name">gelen</p>
  <div class="site-description" itemprop="description">一个酷爱编程的安全工程师</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">75</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">20</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/o0x1024" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;o0x1024" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="/o0x1024@gmail" title="E-Mail → o0x1024@gmail" rel="noopener me"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>

        </div>
      </div>
    </div>

    


        <div class="twopeople">
               <div class="container" style="height:200px;">
                   <canvas class="illo" width="400" height="400" style="max-width: 200px; max-height: 200px; touch-action: none; width: 640px; height: 300px;"></canvas>
               </div>
               <script src="https://cdn.jsdelivr.net/gh/Justlovesmile/CDN/js/twopeople1.js"></script>
               <script src="https://cdn.jsdelivr.net/gh/Justlovesmile/CDN/js/zdog.dist.js"></script>
               <script id="rendered-js" src="https://cdn.jsdelivr.net/gh/Justlovesmile/CDN/js/twopeople.js"></script>
               <style>
                   .twopeople{
                       margin: 0;
                       align-items: center;
                       justify-content: center;
                       text-align: center;
                   }
                   canvas {
                       display: block;
                       margin: 0 auto;
                       cursor: move;
                   }
               </style>
             </div>
        </div>



  </aside>


    </div>

    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://ihongren.github.io/2024/09/10/elkeid-driver-%E5%86%85%E6%A0%B8%E6%A8%A1%E5%9D%97-ko-%E7%BC%96%E8%AF%91-%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar2.gif">
      <meta itemprop="name" content="gelen">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="gelen's blog">
      <meta itemprop="description" content="一个酷爱编程的安全工程师">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | gelen's blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/09/10/elkeid-driver-%E5%86%85%E6%A0%B8%E6%A8%A1%E5%9D%97-ko-%E7%BC%96%E8%AF%91-%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9/" class="post-title-link" itemprop="url">elkeid driver 内核模块 ko 编译 -注意事项</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2024-09-10 11:12:26 / 修改时间：11:46:24" itemprop="dateCreated datePublished" datetime="2024-09-10T11:12:26+08:00">2024-09-10</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h4 id="下载源码"><a href="#下载源码" class="headerlink" title="下载源码"></a>下载源码</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># clone and build</span><br><span class="line">git clone https://github.com/bytedance/Elkeid.git</span><br></pre></td></tr></table></figure>

<h4 id="编译"><a href="#编译" class="headerlink" title="编译"></a>编译</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd Elkeid/driver/LKM/</span><br><span class="line">make clean &amp;&amp; make</span><br></pre></td></tr></table></figure>

<h4 id="插入内核并测试"><a href="#插入内核并测试" class="headerlink" title="插入内核并测试&gt;"></a>插入内核并测试&gt;</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># load and test (should run as root)</span><br><span class="line">insmod hids_driver.ko</span><br><span class="line">dmesg | tail -n 20</span><br><span class="line">test/rst -q</span><br></pre></td></tr></table></figure>

<h4 id="删除"><a href="#删除" class="headerlink" title="删除"></a>删除</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># unload</span><br><span class="line">rmmod hids_driver</span><br></pre></td></tr></table></figure>

<h4 id="查看模块"><a href="#查看模块" class="headerlink" title="查看模块"></a>查看模块</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lsmod|grep hids_driver</span><br></pre></td></tr></table></figure>

<h4 id="放到Nginx指向的目录下"><a href="#放到Nginx指向的目录下" class="headerlink" title="放到Nginx指向的目录下"></a>放到Nginx指向的目录下</h4><p>注意要改名，并且使用sha256生成一个签名文件放在同目录</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/elkeid/nginx/ElkeidAgent/agent/plugin/driver/ko</span><br></pre></td></tr></table></figure>


<h3 id="可能碰到的问题"><a href="#可能碰到的问题" class="headerlink" title="可能碰到的问题"></a>可能碰到的问题</h3><h4 id="make-lib-modules-build-没有那个文件或目录。"><a href="#make-lib-modules-build-没有那个文件或目录。" class="headerlink" title="make: &#x2F;lib&#x2F;modules&#x2F;****&#x2F;build: 没有那个文件或目录。"></a>make: &#x2F;lib&#x2F;modules&#x2F;****&#x2F;build: 没有那个文件或目录。</h4><p>可能原因是 Linux Kernel Header没装<br>首先尝试命令直接安装：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum install kernel-devel-$(uname -r)</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<p>如果网络等问题导致失败，可以在如下网站手动下载然后安装</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://buildlogs.centos.org/</span><br></pre></td></tr></table></figure>

<p>手动安装，解压到当前目录下,把文件放到对应的目录下【&#x2F;usr&#x2F;src&#x2F;kernels&#x2F;****&#x2F;】</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm2cpio kernel-devel-3.10.0-327.el7.x86_64.rpm | cpio -div</span><br></pre></td></tr></table></figure>

<p>（没有这一步应该已经行了）删除&#x2F;lib&#x2F;modules&#x2F;****下的build，然后建立软连接让build -&gt; &#x2F;usr&#x2F;src&#x2F;kernels&#x2F;****&#x2F;</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ln -sv /usr/src/kernels/3.10.0-327.el7.x86_64/ /lib/modules/3.10.0-327.el7.x86_64/build</span><br></pre></td></tr></table></figure>
<h4 id="rpm解压"><a href="#rpm解压" class="headerlink" title="rpm解压"></a>rpm解压</h4><p>rpm2cpio filename | cpio -div</p>
<p>相关链接：<br><a target="_blank" rel="noopener" href="https://github.com/bytedance/Elkeid/blob/main/driver/README-zh_CN.md">https://github.com/bytedance/Elkeid/blob/main/driver/README-zh_CN.md</a></p>
<p>源码地址：<a target="_blank" rel="noopener" href="https://www.central.org/dl/linuxdev/centos6/x86_64/">https://www.central.org/dl/linuxdev/centos6/x86_64/</a></p>
<p><a target="_blank" rel="noopener" href="http://mirrors.aliyun.com/centos-vault/6.9/updates/x86_64/Packages/">http://mirrors.aliyun.com/centos-vault/6.9/updates/x86_64/Packages/</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://ihongren.github.io/2024/09/10/elkeid%E6%B7%BB%E5%8A%A0%E6%96%B0%E7%9A%84baseline%E8%A7%84%E5%88%99/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar2.gif">
      <meta itemprop="name" content="gelen">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="gelen's blog">
      <meta itemprop="description" content="一个酷爱编程的安全工程师">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | gelen's blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/09/10/elkeid%E6%B7%BB%E5%8A%A0%E6%96%B0%E7%9A%84baseline%E8%A7%84%E5%88%99/" class="post-title-link" itemprop="url">elkeid添加新的baseline规则</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2024-09-10 11:11:30 / 修改时间：11:47:57" itemprop="dateCreated datePublished" datetime="2024-09-10T11:11:30+08:00">2024-09-10</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="0x1-baseline-check-info"><a href="#0x1-baseline-check-info" class="headerlink" title="0x1 baseline_check_info"></a>0x1 baseline_check_info</h3><p>在此collections中添加一条记录，如下<br><img src="/images/blog/de9cb0f7a11f02d0b3972ca4d7235705.png"><br>baseline_id-1200 对应的规则文件名</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;baseline_id&quot;: 1200,</span><br><span class="line">  &quot;baseline_version&quot;: &quot;1.0&quot;,</span><br><span class="line">  &quot;check_id&quot;: 18,</span><br><span class="line">  &quot;description&quot;: &quot;The PASS_MAX_DAYS parameter in /etc/login.defs allows an administrator to force passwords to expire once they reach a defined age. It is recommended that the PASS_MAX_DAYS parameter be set to less than or equal to 90 days.&quot;,</span><br><span class="line">  &quot;description_cn&quot;: &quot;redis未设置口令,攻击者可以直接连接redis后获取系统权限。&quot;,</span><br><span class="line">  &quot;security&quot;: &quot;high&quot;,</span><br><span class="line">  &quot;solution&quot;: &quot;Set the PASS_MAX_DAYS parameter to conform to site policy in /etc/login.defs: PASS_MAX_DAYS 90. Modify user parameters for all users with a password set to match: # chage --maxdays 90 &lt;user&gt;. Notes: You can also check this setting in /etc/shadow directly. The 5th field should be 365 or less for all users with a password. A value of -1 will disable password expiration. Additionally the password expiration must be greater than the minimum days between password changes or users will be unable to change their password&quot;,</span><br><span class="line">  &quot;solution_cn&quot;: &quot;打开redis.conf，找到requirepass所在的地方，修改为指定的密码，密码应符合复杂性要求，长度8位及以上，应包含英文数字和特殊字符，避免使用已公开的弱口令，如：abcd@1234等&quot;,</span><br><span class="line">  &quot;title&quot;: &quot;Ensure password expiration is 180 days or less&quot;,</span><br><span class="line">  &quot;title_cn&quot;: &quot;Redis 空口令&quot;,</span><br><span class="line">  &quot;type&quot;: &quot;Identification&quot;,</span><br><span class="line">  &quot;type_cn&quot;: &quot;身份鉴别&quot;,</span><br><span class="line">  &quot;update_time&quot;: &#123;</span><br><span class="line">    &quot;$numberLong&quot;: &quot;1681176471&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;pass_rate&quot;: 87,</span><br><span class="line">  &quot;status&quot;: &quot;finished&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="0x2-baseline-info"><a href="#0x2-baseline-info" class="headerlink" title="0x2 baseline_info"></a>0x2 baseline_info</h3><p>修改check_id_list，添加一个数组元素，此元素为你配置文件中写好的check_id.<br><img src="/images/blog/cbef64750c54f1783362b4f8476ffd6c.png"><br><img src="/images/blog/948718bc1ffeebdb87ce603dd0a8704e.png"></p>
<h3 id="其它"><a href="#其它" class="headerlink" title="其它"></a>其它</h3><p>编译虚拟机 builder     目录&#x2F;root&#x2F;Elkeid&#x2F;plugins</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://ihongren.github.io/2024/09/10/LKM%E7%BC%BA%E5%B0%91%E5%86%85%E6%A0%B8%E6%83%85%E5%86%B5%E4%B8%8B%E7%9A%84%E7%BC%96%E8%AF%91/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar2.gif">
      <meta itemprop="name" content="gelen">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="gelen's blog">
      <meta itemprop="description" content="一个酷爱编程的安全工程师">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | gelen's blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/09/10/LKM%E7%BC%BA%E5%B0%91%E5%86%85%E6%A0%B8%E6%83%85%E5%86%B5%E4%B8%8B%E7%9A%84%E7%BC%96%E8%AF%91/" class="post-title-link" itemprop="url">LKM缺少内核情况下的编译</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2024-09-10 11:10:37 / 修改时间：11:10:41" itemprop="dateCreated datePublished" datetime="2024-09-10T11:10:37+08:00">2024-09-10</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="0x1-下载"><a href="#0x1-下载" class="headerlink" title="0x1 下载"></a>0x1 下载</h3><p>首先安装或下载 【kernel-devel】文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install kernel-devel -y</span><br></pre></td></tr></table></figure>
<p>如果上面命令没安装成功（目录下没有相关文件 &#x2F;lib&#x2F;modules&#x2F;($uname -r)）</p>
<p>那么就自行下载内核文件，通过Google搜索关键字<br>【kernel-devel-$(uname -r)】<br>下载好后是如下两个文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kernel-devel-3.10.0-327.el7.x86_64.rpm</span><br></pre></td></tr></table></figure>

<h3 id="0x2-解压-移动位置"><a href="#0x2-解压-移动位置" class="headerlink" title="0x2 解压&amp;移动位置"></a>0x2 解压&amp;移动位置</h3><p>下载好后，我们通过如下命令解压：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm2cpio kernel-devel-3.10.0-327.el7.x86_64.rpm | cpio -div</span><br></pre></td></tr></table></figure>

<p>解压完后会在当前目录生成一个【usr】目录，移动文件到对应的目录 </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mv usr/src/kernels/3.10.0-327.el7.x86_64 /usr/src/kernels/</span><br></pre></td></tr></table></figure>

<h3 id="0x3-编译"><a href="#0x3-编译" class="headerlink" title="0x3 编译"></a>0x3 编译</h3><p>最后进行编译</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">[root@cslg-10-200-19-71 LKM]# make</span><br><span class="line">|-----------------------------------|</span><br><span class="line">| building HIDS kernel module       |</span><br><span class="line">|-----------------------------------|</span><br><span class="line">make -C /usr/src/kernels/3.10.0-327.el7.x86_64 M=/home/ops/LKM modules</span><br><span class="line">make[1]: 进入目录“/usr/src/kernels/3.10.0-327.el7.x86_64”</span><br><span class="line">  CC [M]  /home/ops/LKM/src/init.o</span><br><span class="line">  CC [M]  /home/ops/LKM/src/kprobe.o</span><br><span class="line">  CC [M]  /home/ops/LKM/src/trace.o</span><br><span class="line">  CC [M]  /home/ops/LKM/src/trace_buffer.o</span><br><span class="line">  CC [M]  /home/ops/LKM/src/smith_hook.o</span><br><span class="line">/home/ops/LKM/src/smith_hook.c:2151:3: 警告：从不兼容的指针类型初始化 [默认启用]</span><br><span class="line">   .hook =  smith_nf_udp_v4_handler,</span><br><span class="line">   ^</span><br><span class="line">/home/ops/LKM/src/smith_hook.c:2151:3: 警告：(在‘g_smith_nf_hooks[0].hook’的初始化附近) [默认启用]</span><br><span class="line">/home/ops/LKM/src/smith_hook.c:2158:3: 警告：从不兼容的指针类型初始化 [默认启用]</span><br><span class="line">   .hook =  smith_nf_udp_v6_handler,</span><br><span class="line">   ^</span><br><span class="line">/home/ops/LKM/src/smith_hook.c:2158:3: 警告：(在‘g_smith_nf_hooks[1].hook’的初始化附近) [默认启用]</span><br><span class="line">  CC [M]  /home/ops/LKM/src/anti_rootkit.o</span><br><span class="line">  CC [M]  /home/ops/LKM/src/filter.o</span><br><span class="line">  CC [M]  /home/ops/LKM/src/util.o</span><br><span class="line">  LD [M]  /home/ops/LKM/hids_driver.o</span><br><span class="line">  Building modules, stage 2.</span><br><span class="line">  MODPOST 1 modules</span><br><span class="line">  CC      /home/ops/LKM/hids_driver.mod.o</span><br><span class="line">  LD [M]  /home/ops/LKM/hids_driver.ko</span><br><span class="line">make[1]: 离开目录“/usr/src/kernels/3.10.0-327.el7.x86_64”</span><br><span class="line">make -C test</span><br><span class="line">make[1]: 进入目录“/home/ops/LKM/test”</span><br><span class="line">|---------------------------------|</span><br><span class="line">| building HIDS pipe reader       |</span><br><span class="line">|---------------------------------|</span><br><span class="line">     CC main.ou</span><br><span class="line">building test programs</span><br><span class="line">     CC rst</span><br><span class="line">make[1]: 离开目录“/home/ops/LKM/test</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://ihongren.github.io/2024/09/10/linux-%E8%87%AA%E5%AE%9A%E4%B9%89service%E6%9C%8D%E5%8A%A1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar2.gif">
      <meta itemprop="name" content="gelen">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="gelen's blog">
      <meta itemprop="description" content="一个酷爱编程的安全工程师">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | gelen's blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/09/10/linux-%E8%87%AA%E5%AE%9A%E4%B9%89service%E6%9C%8D%E5%8A%A1/" class="post-title-link" itemprop="url">linux 自定义service服务</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2024-09-10 11:09:48 / 修改时间：11:09:52" itemprop="dateCreated datePublished" datetime="2024-09-10T11:09:48+08:00">2024-09-10</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="0x0-新建服务文件"><a href="#0x0-新建服务文件" class="headerlink" title="0x0 新建服务文件"></a>0x0 新建服务文件</h3><p>系统服务一般位于【&#x2F;usr&#x2F;lib&#x2F;systemd&#x2F;system】【&#x2F;etc&#x2F;systemd&#x2F;system&#x2F;】目录下。<br>模板service文件如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[Unit]</span><br><span class="line">Description=服务描述</span><br><span class="line">After=服务依赖（再这些服务后启动本服务）</span><br><span class="line"> </span><br><span class="line">[Service]</span><br><span class="line">Type=服务类型</span><br><span class="line">ExecStart=启动命令</span><br><span class="line">ExecStop=终止命令</span><br><span class="line">ExecReload=重启命令</span><br><span class="line"> </span><br><span class="line">[Install]</span><br><span class="line">WantedBy=服务安装设置</span><br></pre></td></tr></table></figure>

<p>【Type】的值有以下几个：</p>
<blockquote>
<ul>
<li>simple：这是默认的值，指定了ExecStart设置后，simple就是默认的Type设置除非指定Type。simple使用ExecStart创建的进程作为服务的主进程，在此设置下systemd会立即启动服务。</li>
<li>forking：如果使用了这个值，则ExecStart的脚本启动后会调用fork()函数创建一个进程作为其启动的一部分。当初始化完成，父进程会退出。子进程会继续作为主进程执行。</li>
<li>oneshot：类似simple，但是在systemd启动之前，进程就会退出。这是一次性的行为。可能还需要设置RemainAfterExit&#x3D;yes，以便systemd认为j进程退出后仍然处于激活状态。</li>
<li>dbus：也和simple很相似，该配置期待或设置一个name值，通过设置* BusName&#x3D;设置name即可。</li>
<li>notify：同样地，与simple相似的配置。顾名思义，该设置会在守护进程启动的时候发送推送消息。</li>
</ul>
</blockquote>
<p>简单的配置如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[Unit]</span><br><span class="line">Description=Redis-Server</span><br><span class="line">After=network.target remote-fs.target nss-lookup.target</span><br><span class="line"> </span><br><span class="line">[Service]</span><br><span class="line">Type=forking</span><br><span class="line">ExecStart=/opt/Redis-6.2.1/redis-server /root/RedisData/redis-conf.conf</span><br><span class="line">ExecStop=kill -9 $(pidof redis-server)</span><br><span class="line">ExecReload=kill -9 $(pidof redis-server) &amp;&amp; /opt/Redis-6.2.1/redis-server /root/RedisData/redis-conf.conf</span><br><span class="line"> </span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure>

<h4 id="0x1-启动服务"><a href="#0x1-启动服务" class="headerlink" title="0x1 启动服务"></a>0x1 启动服务</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># 重新读取所有配置文件，并启动</span><br><span class="line">systemctl daemon-reload</span><br><span class="line"></span><br><span class="line"># 启动服务</span><br><span class="line">service 服务名 start</span><br><span class="line"> </span><br><span class="line"># 终止服务</span><br><span class="line">service 服务名 stop</span><br><span class="line"> </span><br><span class="line"># 重启服务</span><br><span class="line">service 服务名 restart</span><br></pre></td></tr></table></figure>

<h4 id="0x2-启用-禁用开机自启"><a href="#0x2-启用-禁用开机自启" class="headerlink" title="0x2 启用&#x2F;禁用开机自启"></a>0x2 启用&#x2F;禁用开机自启</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 启用开机自启</span><br><span class="line">systemctl enable 服务名</span><br><span class="line"> </span><br><span class="line"># 禁用开机自启</span><br><span class="line">systemctl disable 服务名</span><br></pre></td></tr></table></figure>


<h4 id="0x3-示例"><a href="#0x3-示例" class="headerlink" title="0x3 示例"></a>0x3 示例</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">[Unit]</span><br><span class="line">Description=Elkeid Redis Server</span><br><span class="line">After·=network.target</span><br><span class="line">Documentation=http://redis.io/documentation, man:redis-server(1)</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">WorkingDirectory=/elkeid/redis</span><br><span class="line">ExecStart=/elkeid/redis/redis-server /elkeid/redis/redis.conf</span><br><span class="line">PIDFile=/elkeid/redis/elkeid-redis-server.pid</span><br><span class="line">Restart=always</span><br><span class="line">User=redis</span><br><span class="line">Group=redis</span><br><span class="line">RuntimeDirectory=redis</span><br><span class="line"></span><br><span class="line">PrivateTmp=yes</span><br><span class="line">LimitNOFILE=65535</span><br><span class="line">PrivateDevices=yes</span><br><span class="line">ProtectHome=yes</span><br><span class="line">CapabilityBoundingSet=~CAP_SYS_PTRACE</span><br><span class="line">ProtectSystem=true</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://ihongren.github.io/2024/09/10/linux-ssh-%E5%85%8D%E5%AF%86%E7%99%BB%E5%BD%95%E9%85%8D%E7%BD%AE/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar2.gif">
      <meta itemprop="name" content="gelen">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="gelen's blog">
      <meta itemprop="description" content="一个酷爱编程的安全工程师">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | gelen's blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/09/10/linux-ssh-%E5%85%8D%E5%AF%86%E7%99%BB%E5%BD%95%E9%85%8D%E7%BD%AE/" class="post-title-link" itemprop="url">linux ssh 免密登录配置</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2024-09-10 11:09:25 / 修改时间：11:38:01" itemprop="dateCreated datePublished" datetime="2024-09-10T11:09:25+08:00">2024-09-10</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>配置SSH无密码登录需要3步：</p>
<h3 id="生成公钥和私钥"><a href="#生成公钥和私钥" class="headerlink" title="生成公钥和私钥"></a>生成公钥和私钥</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa</span><br></pre></td></tr></table></figure>
<p>全部回车确认就行<br><img src="/images/blog/430b0e8dee2975cc706a3b9d875312d3.png"></p>
<h3 id="导入公钥到认证文件-更改权限"><a href="#导入公钥到认证文件-更改权限" class="headerlink" title="导入公钥到认证文件,更改权限"></a>导入公钥到认证文件,更改权限</h3><p>默认在 ~&#x2F;.ssh目录生成两个文件：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">id_rsa ：私钥</span><br><span class="line">id_rsa.pub ：公钥</span><br></pre></td></tr></table></figure>
<p>把公钥导入你要登录的服务器</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat ~/.ssh/id_rsa.pub &gt;&gt; ~/.ssh/authorized_keys</span><br></pre></td></tr></table></figure>

<p>更改权限</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">chmod 700 ~/.ssh  </span><br><span class="line">chmod 600 ~/.ssh/authorized_keys</span><br></pre></td></tr></table></figure>

<p>3.测试登录</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -i id_rsa root@22.44.11.11</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://ihongren.github.io/2024/09/10/vue-nginx%E4%BD%BF%E7%94%A8gizp%E5%AE%9E%E5%9C%A8%E9%A6%96%E5%B1%8F%E5%8A%A0%E8%BD%BD%E9%80%9F%E5%BA%A6%E4%BC%98%E5%8C%96/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar2.gif">
      <meta itemprop="name" content="gelen">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="gelen's blog">
      <meta itemprop="description" content="一个酷爱编程的安全工程师">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | gelen's blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/09/10/vue-nginx%E4%BD%BF%E7%94%A8gizp%E5%AE%9E%E5%9C%A8%E9%A6%96%E5%B1%8F%E5%8A%A0%E8%BD%BD%E9%80%9F%E5%BA%A6%E4%BC%98%E5%8C%96/" class="post-title-link" itemprop="url">vue+nginx使用gizp实在首屏加载速度优化</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2024-09-10 11:08:27 / 修改时间：11:38:01" itemprop="dateCreated datePublished" datetime="2024-09-10T11:08:27+08:00">2024-09-10</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h4 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h4><p>我的工程使用的是vue-cli生成的工程 vue create project_name,然后再顶层目录新建了一个vue.config.js,后续部分配置需要写在这里面</p>
<h4 id="0x1-环境"><a href="#0x1-环境" class="headerlink" title="0x1 环境"></a>0x1 环境</h4><blockquote>
<p>CentOS Linux release 7.9.2009 (Core)<br>Vue 3<br>Vue router 4.*<br>nginx version: nginx&#x2F;1.20.1<br>compression-webpack-plugin ^6.1.1</p>
</blockquote>
<h4 id="0x2-vue配置"><a href="#0x2-vue配置" class="headerlink" title="0x2 vue配置"></a>0x2 vue配置</h4><p>首先安装插件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install compression-webpack-plugin --save-dev</span><br></pre></td></tr></table></figure>

<h5 id="vue-config-js配置"><a href="#vue-config-js配置" class="headerlink" title="vue.config.js配置"></a>vue.config.js配置</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">const CompressionPlugin = require(&#x27;compression-webpack-plugin&#x27;)</span><br><span class="line"></span><br><span class="line">module.exports = &#123;</span><br><span class="line">  outputDir: process.env.outputDir,</span><br><span class="line">  lintOnSave: false,</span><br><span class="line">  productionSourceMap: false,</span><br><span class="line">  devServer: &#123;</span><br><span class="line">    proxy: &#123;</span><br><span class="line">      &quot;/api&quot;: &#123;</span><br><span class="line">        target: &quot;http://127.0.0.1:7788&quot;,</span><br><span class="line">        changeOrigin: true,</span><br><span class="line">        //   ws: true,</span><br><span class="line">        // rewrite:(path) =&gt; path.replace(/^\/api/,&#x27;&#x27;)</span><br><span class="line">        pathRewrite: &#123;</span><br><span class="line">          &quot;^/api&quot;: &quot;&quot;,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  configureWebpack: config =&gt; &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      plugins: [</span><br><span class="line">        new CompressionPlugin(&#123;</span><br><span class="line">          algorithm: &#x27;gzip&#x27;, // 使用gzip压缩</span><br><span class="line">          test: /\.js$|\.html$|\.css$/, // 匹配文件名</span><br><span class="line">          minRatio: 1, // 压缩率小于1才会压缩</span><br><span class="line">          threshold: 10240, // 对超过10k的数据压缩</span><br><span class="line">          deleteOriginalAssets: false,</span><br><span class="line">        &#125;)</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>vue配置好后直接使用命令编译就好</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run build</span><br></pre></td></tr></table></figure>


<h4 id="nginx配置"><a href="#nginx配置" class="headerlink" title="nginx配置"></a>nginx配置</h4><p>在&#x2F;etc&#x2F;nginx&#x2F;nginx.conf 的http中加入如下配置</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">user nginx;</span><br><span class="line">worker_processes auto;</span><br><span class="line">error_log /var/log/nginx/error.log;</span><br><span class="line">pid /run/nginx.pid;</span><br><span class="line"></span><br><span class="line">include /usr/share/nginx/modules/*.conf;</span><br><span class="line"></span><br><span class="line">events &#123;</span><br><span class="line">    worker_connections 1024;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">http &#123;</span><br><span class="line">    log_format  main  &#x27;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &#x27;</span><br><span class="line">                      &#x27;$status $body_bytes_sent &quot;$http_referer&quot; &#x27;</span><br><span class="line">                      &#x27;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&#x27;;</span><br><span class="line"></span><br><span class="line">    access_log  /var/log/nginx/access.log  main;</span><br><span class="line"></span><br><span class="line">    sendfile            on;</span><br><span class="line">    tcp_nopush          on;</span><br><span class="line">    tcp_nodelay         on;</span><br><span class="line">    keepalive_timeout   65;</span><br><span class="line">    types_hash_max_size 4096;</span><br><span class="line"></span><br><span class="line">    include             /etc/nginx/mime.types;</span><br><span class="line">    default_type        application/octet-stream;</span><br><span class="line">    gzip_static on;</span><br><span class="line">    gzip  on;</span><br><span class="line">    gzip_proxied any;</span><br><span class="line">    gzip_min_length  1k;</span><br><span class="line">    gzip_buffers     4 16k;</span><br><span class="line">    gzip_http_version 1.0;</span><br><span class="line">    gzip_comp_level 5;</span><br><span class="line">    gzip_types text/plain application/javascript application/css text/css application/xml text/javascript application/x-httpd-php image/jpeg image/gif image/png;</span><br><span class="line">    gzip_vary on;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    include /etc/nginx/conf.d/*.conf;</span><br><span class="line"></span><br><span class="line">    server &#123;</span><br><span class="line">        listen       82;</span><br><span class="line">        listen       [::]:82;</span><br><span class="line">        server_name  _;</span><br><span class="line">        root         /usr/share/nginx/html;</span><br><span class="line"></span><br><span class="line">        # Load configuration files for the default server block.</span><br><span class="line">        include /etc/nginx/default.d/*.conf;</span><br><span class="line"></span><br><span class="line">        error_page 404 /404.html;</span><br><span class="line">        location = /404.html &#123;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        error_page 500 502 503 504 /50x.html;</span><br><span class="line">        location = /50x.html &#123;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>把npm编译好的文件放（dist）到 nginx对应的root 目录下即可。<br>如下图未压缩是2.6M ，压纹后600KB。<br><img src="/images/blog/a762fbfbfc4ee92e36d521d50c14e61e.png"></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://ihongren.github.io/2024/09/10/vue-keepAlive-%E9%A1%B5%E9%9D%A2%E7%BC%93%E5%AD%98-%E9%83%A8%E5%88%86%E9%A1%B5%E9%9D%A2%E7%BC%93%E5%AD%98/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar2.gif">
      <meta itemprop="name" content="gelen">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="gelen's blog">
      <meta itemprop="description" content="一个酷爱编程的安全工程师">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | gelen's blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/09/10/vue-keepAlive-%E9%A1%B5%E9%9D%A2%E7%BC%93%E5%AD%98-%E9%83%A8%E5%88%86%E9%A1%B5%E9%9D%A2%E7%BC%93%E5%AD%98/" class="post-title-link" itemprop="url">vue keepAlive 页面缓存+部分页面缓存</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2024-09-10 11:07:41 / 修改时间：11:38:01" itemprop="dateCreated datePublished" datetime="2024-09-10T11:07:41+08:00">2024-09-10</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="0x1-keepAlive"><a href="#0x1-keepAlive" class="headerlink" title="0x1 keepAlive"></a>0x1 keepAlive</h3><p>有如下【笔记】功能，目的是想【新增笔记】后返回列表页面刷新页面，在查看笔记后返回列表页面时不刷新。<br><img src="/images/blog/f7b9bc54ac94ff532f90b94e2adb7234.png"></p>
<h3 id="0x2-路由配置"><a href="#0x2-路由配置" class="headerlink" title="0x2 路由配置"></a>0x2 路由配置</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">          path: &quot;notice&quot;,</span><br><span class="line">          name: &quot;notice&quot;,</span><br><span class="line">          redirect: &#123; name: &#x27;noticeindex&#x27; &#125;,</span><br><span class="line">          meta: &#123; keepAlive: true &#125;,</span><br><span class="line">          component: () =&gt; import(&quot;../views/src/notice/core.vue&quot;),</span><br><span class="line">          children: [</span><br><span class="line">            &#123;</span><br><span class="line">              path: &quot;noticeindex&quot;,</span><br><span class="line">              name: &quot;noticeindex&quot;,</span><br><span class="line">              meta: &#123; keepAlive: true &#125;,</span><br><span class="line">              component: () =&gt; import(&quot;../views/src/notice/notice_index.vue&quot;),</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">              path: &quot;edit/:id&quot;,</span><br><span class="line">              name: &quot;editNotice&quot;,</span><br><span class="line">              meta: &#123; keepAlive: true &#125;,</span><br><span class="line">              component: () =&gt; import(&quot;../views/src/notice/notice_edit.vue&quot;),</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">              path: &quot;view/:id&quot;,</span><br><span class="line">              name: &quot;viewNotice&quot;,</span><br><span class="line">              meta: &#123; keepAlive: false &#125;,</span><br><span class="line">              component: () =&gt; import(&quot;../views/src/notice/notice_view.vue&quot;),</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">              path: &quot;new&quot;,</span><br><span class="line">              name: &quot;newNotice&quot;,</span><br><span class="line">              meta: &#123; keepAlive: true &#125;,</span><br><span class="line">              component: () =&gt; import(&quot;../views/src/notice/notice_new.vue&quot;),</span><br><span class="line">            &#125;</span><br></pre></td></tr></table></figure>

<h3 id="0x3-core-vue"><a href="#0x3-core-vue" class="headerlink" title="0x3 core.vue"></a>0x3 core.vue</h3><p>如下是vue3 vue-router 4.0版本的写法 vue2有区别</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;router-view v-slot=&quot;&#123; Component &#125;&quot;&gt;</span><br><span class="line">        &lt;keep-alive&gt;</span><br><span class="line">            &lt;component :is=&quot;Component&quot; v-if=&quot;$route.meta.keepAlive&quot; :key=&quot;$route.name&quot; /&gt;</span><br><span class="line">        &lt;/keep-alive&gt;</span><br><span class="line">        &lt;component :is=&quot;Component&quot; v-if=&quot;!$route.meta.keepAlive&quot; :key=&quot;$route.name&quot; /&gt;</span><br><span class="line">    &lt;/router-view&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"> </span><br></pre></td></tr></table></figure>

<h3 id="0x4-notice-index-vue"><a href="#0x4-notice-index-vue" class="headerlink" title="0x4 notice_index.vue"></a>0x4 notice_index.vue</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">export default defineComponent(&#123;</span><br><span class="line">  components: &#123; SearchOutlined, ReadOutlined, MdEditor &#125;,</span><br><span class="line"></span><br><span class="line">  beforeRouteEnter(to, from, next) &#123;</span><br><span class="line">    // to.meta.keepAlive = false</span><br><span class="line">    console.log(&#x27;index &#x27;, &#x27;to.name:&#x27;, to.name, &#x27; from.name:&#x27;, from.name)</span><br><span class="line">    from.meta.keeplive = false;</span><br><span class="line">    next()</span><br><span class="line">  &#125;,</span><br><span class="line">  beforeRouteLeave(to, from, next) &#123;</span><br><span class="line">    to.meta.keepAlive = false</span><br><span class="line">    next()</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  activated() &#123;</span><br><span class="line">    if (!this.$route.meta.isBack) &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    // 从新设置页面得路由元信息</span><br><span class="line">    this.$route.meta.isBack = false</span><br><span class="line">  &#125;,</span><br><span class="line">  setup() &#123;</span><br><span class="line">  &#125;</span><br><span class="line">return&#123;&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h3 id="0x5-notice-new-vue"><a href="#0x5-notice-new-vue" class="headerlink" title="0x5 notice_new.vue"></a>0x5 notice_new.vue</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">export default defineComponent(&#123;</span><br><span class="line">    components: &#123; SearchOutlined, ReadOutlined, MdEditor &#125;,</span><br><span class="line">    beforeRouteLeave(to, from, next) &#123;</span><br><span class="line">        console.log(&#x27;index &#x27;, &#x27;to.name:&#x27;, to.name, &#x27; from.name:&#x27;, from.name)</span><br><span class="line">        if (this.hasEdit) &#123;</span><br><span class="line">            to.meta.keepAlive = false</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            to.meta.keepAlive = true</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        next()</span><br><span class="line">    &#125;,</span><br><span class="line">    setup() &#123;</span><br><span class="line">        const router = useRouter();</span><br><span class="line">        let viewNotice: Notice = reactive(&#123;&#125;)</span><br><span class="line">        let cid = router.currentRoute.value.params.cid as string;</span><br><span class="line">        let hasEdit = ref(false)</span><br><span class="line">        const onReturn = () =&gt; &#123;</span><br><span class="line">            router.push(&#123; name: &quot;notice&quot; &#125;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">//当保存内容后，标志设为true表示需要刷新列表业页</span><br><span class="line">        const onSave = () =&gt; &#123;</span><br><span class="line">                    hasEdit.value = true</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://ihongren.github.io/2024/09/10/%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar2.gif">
      <meta itemprop="name" content="gelen">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="gelen's blog">
      <meta itemprop="description" content="一个酷爱编程的安全工程师">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | gelen's blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/09/10/%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81/" class="post-title-link" itemprop="url">文件下载示例代码</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2024-09-10 11:07:08 / 修改时间：11:07:15" itemprop="dateCreated datePublished" datetime="2024-09-10T11:07:08+08:00">2024-09-10</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">srcService.ExportByCid(parseInt(selectVal.value)).then((res: any) =&gt; &#123;</span><br><span class="line">    //获取文件名，需要在后端进行配置</span><br><span class="line">    let filename = res.headers[&#x27;content-disposition&#x27;].split(&#x27;filename=&#x27;)[1].split(&#x27;; filename&#x27;)[0]</span><br><span class="line"></span><br><span class="line">    let type = res.headers[&#x27;content-type&#x27;].split(&#x27;;&#x27;)[0]</span><br><span class="line">    let blob = new Blob([res.data], &#123; type: type &#125;)</span><br><span class="line">    const a = document.createElement(&#x27;a&#x27;)</span><br><span class="line"></span><br><span class="line">    // 创建URL</span><br><span class="line">    const blobUrl = window.URL.createObjectURL(blob)</span><br><span class="line">    a.download = filename</span><br><span class="line">    a.href = blobUrl</span><br><span class="line">    console.log(a)</span><br><span class="line">    document.body.appendChild(a)</span><br><span class="line">    // 下载文件</span><br><span class="line">    a.click()</span><br><span class="line">    // 释放内存</span><br><span class="line">    URL.revokeObjectURL(blobUrl)</span><br><span class="line">    document.body.removeChild(a)</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://ihongren.github.io/2024/09/10/%E5%A8%81%E8%83%81%E6%83%85%E6%8A%A5%E5%B9%B3%E5%8F%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar2.gif">
      <meta itemprop="name" content="gelen">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="gelen's blog">
      <meta itemprop="description" content="一个酷爱编程的安全工程师">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | gelen's blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/09/10/%E5%A8%81%E8%83%81%E6%83%85%E6%8A%A5%E5%B9%B3%E5%8F%B0/" class="post-title-link" itemprop="url">威胁情报平台</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2024-09-10 11:06:48 / 修改时间：11:06:53" itemprop="dateCreated datePublished" datetime="2024-09-10T11:06:48+08:00">2024-09-10</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="0x1-威胁情报在线查询"><a href="#0x1-威胁情报在线查询" class="headerlink" title="0x1 威胁情报在线查询"></a>0x1 威胁情报在线查询</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"> #微步</span><br><span class="line">https://x.threatbook.cn/  </span><br><span class="line"># 安恒</span><br><span class="line">https://ti.dbappsecurity.com.cn/ </span><br><span class="line"># 奇安信： </span><br><span class="line">https://ti.qianxin.com/portal  </span><br><span class="line"> #360威胁情报中心</span><br><span class="line">https://ti.360.com/  </span><br><span class="line">#微软</span><br><span class="line">https://community.riskiq.com/home</span><br><span class="line">#IBM X-Force Exchange</span><br><span class="line">https://exchange.xforce.ibmcloud.com/  </span><br><span class="line">https://otx.alienvault.com/</span><br><span class="line">https://www.virustotal.com/</span><br></pre></td></tr></table></figure>

<h3 id="0x2-IP信息查询"><a href="#0x2-IP信息查询" class="headerlink" title="0x2 IP信息查询"></a>0x2 IP信息查询</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 埃文科技</span><br><span class="line">https://www.ipuu.net/query/ip?search=175.6.23.170 </span><br><span class="line"># CNNIC</span><br><span class="line">https://ipwhois.cnnic.cn/bns/query/Query/ipwhoisQuery.do?queryOption=ipv4&amp;txtquery=175.6.23.170</span><br><span class="line"># IPIP</span><br><span class="line">http://www.ipip.net/ip.html</span><br></pre></td></tr></table></figure>

<h3 id="0x3-域名信息查询"><a href="#0x3-域名信息查询" class="headerlink" title="0x3 域名信息查询"></a>0x3 域名信息查询</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://beian.miit.gov.cn/#/Integrated/recordQuery</span><br></pre></td></tr></table></figure>

<h3 id="0x4-情报搜索"><a href="#0x4-情报搜索" class="headerlink" title="0x4 情报搜索"></a>0x4 情报搜索</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">https://0.zone/</span><br><span class="line">https://fofa.info/</span><br></pre></td></tr></table></figure>

<h3 id="0x5-地址定位查询"><a href="#0x5-地址定位查询" class="headerlink" title="0x5 地址定位查询"></a>0x5 地址定位查询</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">http://chaipip.com/aiwen.html</span><br><span class="line">https://www.opengps.cn/Data/IP/ipplus.aspx</span><br></pre></td></tr></table></figure>


<h3 id="0x6-创建情报："><a href="#0x6-创建情报：" class="headerlink" title="0x6 创建情报："></a>0x6 创建情报：</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">MalwareBazaar | Browse malware samples</span><br><span class="line">https://otx.alienvault.com/</span><br><span class="line">https://redqueen.tj-un.com/IntelHome.html</span><br><span class="line">https://sslbl.abuse.ch/blacklist/ja3_fingerprints.rules</span><br><span class="line">https://myip.ms/browse/scam</span><br><span class="line">https://myip.ms/files/blacklist/general/latest_blacklist.txt</span><br><span class="line">http://www.lajiz.cn/wp-content/uploads/2020/04/20200501003259.txt</span><br><span class="line">https://github.com/NewBee119/Ti_Collector/tree/master/ThreatFeedSpider/scripts</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://ihongren.github.io/2024/09/10/burpsuit-proxifier-PC%E6%8A%93%E5%8F%96%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8C%85/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar2.gif">
      <meta itemprop="name" content="gelen">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="gelen's blog">
      <meta itemprop="description" content="一个酷爱编程的安全工程师">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | gelen's blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/09/10/burpsuit-proxifier-PC%E6%8A%93%E5%8F%96%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8C%85/" class="post-title-link" itemprop="url">burpsuit+proxifier+PC抓取小程序包</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2024-09-10 11:06:03 / 修改时间：11:45:14" itemprop="dateCreated datePublished" datetime="2024-09-10T11:06:03+08:00">2024-09-10</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="0x1-准备"><a href="#0x1-准备" class="headerlink" title="0x1 准备"></a>0x1 准备</h3><ul>
<li>proxifier</li>
<li>burpsuit</li>
<li>小程序的程序名【WeChatAppEx.exe】</li>
</ul>
<h3 id="0x2-Proxifier-设置"><a href="#0x2-Proxifier-设置" class="headerlink" title="0x2 Proxifier 设置"></a>0x2 Proxifier 设置</h3><p><strong>A.设置代理服务器</strong></p>
<p>菜单导航【profile】 -&gt; 【Proxy Servers】<br><img src="/images/blog/71ee3e9b8d7bce115585d47e13c93a1c.png"></p>
<p>添加如下三个选项</p>
<blockquote>
<p>注意：这里的【Address】要和burpsuit同步，这里是本机IP burpsuit也要监听本机IP</p>
</blockquote>
<p><img src="/images/blog/5d70009389d312343fdd0c008f7aaa44.png"></p>
<p>这里会有个问题，HTTP 可能无法设置，按如下操作，打开HTTP代理支持<br><img src="/images/blog/ea42d7dd90de3a02dd0eacff92b5f405.png"><br><img src="/images/blog/f7d2521cb561b296b766084d0e75cf8c.png"></p>
<p><strong>B.设置代理规则</strong><br>【profile】 -&gt; 【proxification Rules】<br><img src="/images/blog/536094a7113a658fbb8e7c742365b43d.png"><br>如下添加两条规则。<br><img src="/images/blog/0ac324ac891134568d8ebcf20f52587f.png"></p>
<p><img src="/images/blog/5bc54fbe20e89e03d4cd57a3956d697b.png"><br>点击确认，proxifier设置到此为止</p>
<h3 id="0x3-brupsuit设置"><a href="#0x3-brupsuit设置" class="headerlink" title="0x3 brupsuit设置"></a>0x3 brupsuit设置</h3><p>设置端口和IP要和Proxifier对应，不然抓不了包<br><img src="/images/blog/7fbce8e225ca1281cc7f4322184a81ae.png"></p>
<h3 id="0x4-抓包"><a href="#0x4-抓包" class="headerlink" title="0x4 抓包"></a>0x4 抓包</h3><p>随便打开一个小程序【奈雪的茶】，如下图所示，成功抓到请求包<br><img src="/images/blog/376ec165d58db4c843aae48ad39f38e0.png"></p>
<h3 id="0x5-注意"><a href="#0x5-注意" class="headerlink" title="0x5 注意"></a>0x5 注意</h3><p>如果抓不到HTTPS请求包的话，请先安装证书。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" title="上一页" aria-label="上一页" href="/page/3/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><span class="space">&hellip;</span><a class="page-number" href="/page/8/">8</a><a class="extend next" rel="next" title="下一页" aria-label="下一页" href="/page/5/"><i class="fa fa-angle-right"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pangu/4.0.7/pangu.min.js" integrity="sha256-j+yj56cdEY2CwkVtGyz18fNybFGpMGJ8JxG3GSyO2+I=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/sidebar.js"></script><script src="/js/next-boot.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>

  <script class="next-config" data-name="pdf" type="application/json">{"object_url":{"url":"https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.3.0/pdfobject.min.js","integrity":"sha256-JJZNsid68vnh3/zyj0lY9BN5ynxVX/12XgOa1TlaYN0="},"url":"/lib/pdf/web/viewer.html"}</script>
  <script src="/js/third-party/tags/pdf.js"></script>




  <script src="/js/third-party/pace.js"></script>


  








</body>
</html>
